{"ast":null,"code":"import { getDay, isFirstDayOfWeek, isAfter, isBefore, shiftDate, endOf, startOf, isArray, isSame } from 'ngx-bootstrap/chronos';\nexport function getStartingDayOfCalendar(date, options) {\n  if (isFirstDayOfWeek(date, options.firstDayOfWeek)) {\n    return date;\n  }\n\n  const weekDay = getDay(date);\n  const offset = calculateDateOffset(weekDay, options.firstDayOfWeek);\n  return shiftDate(date, {\n    day: -offset\n  });\n}\nexport function calculateDateOffset(weekday, startingDayOffset) {\n  const _startingDayOffset = Number(startingDayOffset);\n\n  if (isNaN(_startingDayOffset)) {\n    return 0;\n  }\n\n  if (_startingDayOffset === 0) {\n    return weekday;\n  }\n\n  const offset = weekday - _startingDayOffset % 7;\n  return offset < 0 ? offset + 7 : offset;\n}\nexport function isMonthDisabled(date, min, max) {\n  const minBound = min && isBefore(endOf(date, 'month'), min, 'day');\n  const maxBound = max && isAfter(startOf(date, 'month'), max, 'day');\n  return minBound || maxBound || false;\n}\nexport function isYearDisabled(date, min, max) {\n  const minBound = min && isBefore(endOf(date, 'year'), min, 'day');\n  const maxBound = max && isAfter(startOf(date, 'year'), max, 'day');\n  return minBound || maxBound || false;\n}\nexport function isDisabledDate(date, datesDisabled, unit) {\n  if (!datesDisabled || !isArray(datesDisabled) || !datesDisabled.length) {\n    return false;\n  }\n\n  if (unit && unit === 'year') {\n    return datesDisabled.some(dateDisabled => isSame(date, dateDisabled, 'year'));\n  }\n\n  return datesDisabled.some(dateDisabled => isSame(date, dateDisabled, 'date'));\n}\nexport function isEnabledDate(date, datesEnabled, unit) {\n  if (!datesEnabled || !isArray(datesEnabled) || !datesEnabled.length) {\n    return false;\n  }\n\n  if (unit && unit === 'year') {\n    return !datesEnabled.some(dateDisabled => isSame(date, dateDisabled, 'year'));\n  }\n\n  return !datesEnabled.some(enabledDate => isSame(date, enabledDate, 'date'));\n}\nexport function getYearsCalendarInitialDate(state, calendarIndex = 0) {\n  const model = state && state.yearsCalendarModel && state.yearsCalendarModel[calendarIndex];\n  return (model === null || model === void 0 ? void 0 : model.years[0]) && model.years[0][0] && model.years[0][0].date;\n}\nexport function checkRangesWithMaxDate(ranges, maxDate) {\n  if (!ranges) return ranges;\n  if (!maxDate) return ranges;\n  if (!ranges.length && !ranges[0].value) return ranges;\n  ranges.forEach(item => {\n    if (!item || !item.value) return ranges;\n    if (item.value instanceof Date) return ranges;\n    if (!(item.value instanceof Array && item.value.length)) return ranges;\n    item.value = compareDateWithMaxDateHelper(item.value, maxDate);\n    return ranges;\n  });\n  return ranges;\n}\nexport function checkBsValue(date, maxDate) {\n  if (!date) return date;\n  if (!maxDate) return date;\n  if (date instanceof Array && !date.length) return date;\n  if (date instanceof Date) return date;\n  return compareDateWithMaxDateHelper(date, maxDate);\n}\n\nfunction compareDateWithMaxDateHelper(date, maxDate) {\n  if (date instanceof Array) {\n    const editedValues = date.map(item => {\n      if (!item) return item;\n      if (isAfter(item, maxDate, 'date')) item = maxDate;\n      return item;\n    });\n    return editedValues;\n  }\n\n  return date;\n}\n\nexport function setCurrentTimeOnDateSelect(value) {\n  if (!value) return value;\n  return setCurrentTimeHelper(value);\n}\nexport function setDateRangesCurrentTimeOnDateSelect(value) {\n  if (!(value === null || value === void 0 ? void 0 : value.length)) return value;\n  value.map(date => {\n    if (!date) {\n      return date;\n    }\n\n    return setCurrentTimeHelper(date);\n  });\n  return value;\n}\n\nfunction setCurrentTimeHelper(date) {\n  const now = new Date();\n  date.setMilliseconds(now.getMilliseconds());\n  date.setSeconds(now.getSeconds());\n  date.setMinutes(now.getMinutes());\n  date.setHours(now.getHours());\n  return date;\n}","map":null,"metadata":{},"sourceType":"module"}