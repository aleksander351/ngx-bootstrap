{"ast":null,"code":"import { ComponentRef, ElementRef, EventEmitter, Renderer2, SimpleChanges, ViewContainerRef } from '@angular/core';\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { filter } from 'rxjs/operators';\nimport { BsDatepickerConfig } from './bs-datepicker.config';\nimport { BsDaterangepickerInlineConfig } from './bs-daterangepicker-inline.config';\nimport { BsDaterangepickerInlineContainerComponent } from './themes/bs/bs-daterangepicker-inline-container.component';\nimport { checkBsValue, checkRangesWithMaxDate, setDateRangesCurrentTimeOnDateSelect } from './utils/bs-calendar-utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./bs-daterangepicker-inline.config\";\nimport * as i2 from \"ngx-bootstrap/component-loader\";\nexport let BsDaterangepickerInlineDirective = /*#__PURE__*/(() => {\n  class BsDaterangepickerInlineDirective {\n    constructor(_config, _elementRef, _renderer, _viewContainerRef, cis) {\n      this._config = _config;\n      this._elementRef = _elementRef;\n      /**\r\n       * Indicates whether datepicker is enabled or not\r\n       */\n\n      this.isDisabled = false;\n      /**\r\n       * Emits when daterangepicker value has been changed\r\n       */\n\n      this.bsValueChange = new EventEmitter();\n      this._subs = []; // todo: assign only subset of fields\n\n      Object.assign(this, this._config);\n      this._datepicker = cis.createLoader(_elementRef, _viewContainerRef, _renderer);\n    }\n    /**\r\n     * Initial value of datepicker\r\n     */\n\n\n    set bsValue(value) {\n      var _a;\n\n      if (this._bsValue === value) {\n        return;\n      }\n\n      if (value && ((_a = this.bsConfig) === null || _a === void 0 ? void 0 : _a.initCurrentTime)) {\n        value = setDateRangesCurrentTimeOnDateSelect(value);\n      }\n\n      this._bsValue = value;\n      this.bsValueChange.emit(value);\n    }\n\n    ngOnInit() {\n      this.setConfig(); // if date changes from external source (model -> view)\n\n      this._subs.push(this.bsValueChange.subscribe(value => {\n        if (this._datepickerRef) {\n          this._datepickerRef.instance.value = value;\n        }\n      })); // if date changes from picker (view -> model)\n\n\n      if (this._datepickerRef) {\n        this._subs.push(this._datepickerRef.instance.valueChange.pipe(filter(range => range && range[0] && !!range[1])).subscribe(value => {\n          this.bsValue = value;\n        }));\n      }\n    }\n\n    ngOnChanges(changes) {\n      if (changes.bsConfig) {\n        if (changes.bsConfig.currentValue.initCurrentTime && changes.bsConfig.currentValue.initCurrentTime !== changes.bsConfig.previousValue.initCurrentTime && this._bsValue) {\n          this._bsValue = setDateRangesCurrentTimeOnDateSelect(this._bsValue);\n          this.bsValueChange.emit(this._bsValue);\n        }\n      }\n\n      if (!this._datepickerRef || !this._datepickerRef.instance) {\n        return;\n      }\n\n      if (changes.minDate) {\n        this._datepickerRef.instance.minDate = this.minDate;\n      }\n\n      if (changes.maxDate) {\n        this._datepickerRef.instance.maxDate = this.maxDate;\n      }\n\n      if (changes.datesEnabled) {\n        this._datepickerRef.instance.datesEnabled = this.datesEnabled;\n        this._datepickerRef.instance.value = this._bsValue;\n      }\n\n      if (changes.datesDisabled) {\n        this._datepickerRef.instance.datesDisabled = this.datesDisabled;\n      }\n\n      if (changes.daysDisabled) {\n        this._datepickerRef.instance.daysDisabled = this.daysDisabled;\n      }\n\n      if (changes.isDisabled) {\n        this._datepickerRef.instance.isDisabled = this.isDisabled;\n      }\n\n      if (changes.dateCustomClasses) {\n        this._datepickerRef.instance.dateCustomClasses = this.dateCustomClasses;\n      }\n\n      this.setConfig();\n    }\n    /**\r\n     * Set config for datepicker\r\n     */\n\n\n    setConfig() {\n      var _a;\n\n      if (this._datepicker) {\n        this._datepicker.hide();\n      }\n\n      this._config = Object.assign({}, this._config, this.bsConfig, {\n        value: checkBsValue(this._bsValue, this.maxDate || this.bsConfig && this.bsConfig.maxDate),\n        isDisabled: this.isDisabled,\n        minDate: this.minDate || this.bsConfig && this.bsConfig.minDate,\n        maxDate: this.maxDate || this.bsConfig && this.bsConfig.maxDate,\n        daysDisabled: this.daysDisabled || this.bsConfig && this.bsConfig.daysDisabled,\n        dateCustomClasses: this.dateCustomClasses || this.bsConfig && this.bsConfig.dateCustomClasses,\n        datesDisabled: this.datesDisabled || this.bsConfig && this.bsConfig.datesDisabled,\n        datesEnabled: this.datesEnabled || this.bsConfig && this.bsConfig.datesEnabled,\n        ranges: checkRangesWithMaxDate(this.bsConfig && this.bsConfig.ranges, this.maxDate || this.bsConfig && this.bsConfig.maxDate),\n        maxDateRange: this.bsConfig && this.bsConfig.maxDateRange,\n        initCurrentTime: (_a = this.bsConfig) === null || _a === void 0 ? void 0 : _a.initCurrentTime\n      });\n      this._datepickerRef = this._datepicker.provide({\n        provide: BsDatepickerConfig,\n        useValue: this._config\n      }).attach(BsDaterangepickerInlineContainerComponent).to(this._elementRef).show();\n    }\n\n    ngOnDestroy() {\n      this._datepicker.dispose();\n    }\n\n  }\n\n  BsDaterangepickerInlineDirective.ɵfac = function BsDaterangepickerInlineDirective_Factory(t) {\n    return new (t || BsDaterangepickerInlineDirective)(i0.ɵɵdirectiveInject(i1.BsDaterangepickerInlineConfig), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i2.ComponentLoaderFactory));\n  };\n\n  BsDaterangepickerInlineDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: BsDaterangepickerInlineDirective,\n    selectors: [[\"bs-daterangepicker-inline\"]],\n    inputs: {\n      bsValue: \"bsValue\",\n      bsConfig: \"bsConfig\",\n      isDisabled: \"isDisabled\",\n      minDate: \"minDate\",\n      maxDate: \"maxDate\",\n      dateCustomClasses: \"dateCustomClasses\",\n      daysDisabled: \"daysDisabled\",\n      datesDisabled: \"datesDisabled\",\n      datesEnabled: \"datesEnabled\"\n    },\n    outputs: {\n      bsValueChange: \"bsValueChange\"\n    },\n    exportAs: [\"bsDaterangepickerInline\"],\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n  return BsDaterangepickerInlineDirective;\n})();","map":null,"metadata":{},"sourceType":"module"}