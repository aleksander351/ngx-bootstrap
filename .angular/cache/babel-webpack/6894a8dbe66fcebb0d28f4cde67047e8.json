{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { isSameDay } from 'ngx-bootstrap/chronos';\nimport { BsNavigationDirection } from '../../models';\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../bs-datepicker.config\";\nimport * as i2 from \"./bs-calendar-layout.component\";\nimport * as i3 from \"./bs-datepicker-navigation-view.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./bs-datepicker-day-decorator.directive\";\nimport * as i6 from \"ngx-bootstrap/tooltip\";\n\nfunction BsDaysCalendarViewComponent_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\");\n  }\n}\n\nfunction BsDaysCalendarViewComponent_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.calendar.weekdays[i_r4], \" \");\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵlistener(\"click\", function BsDaysCalendarViewComponent_tr_8_td_1_span_1_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const week_r5 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.selectWeek(week_r5);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r6 = i0.ɵɵnextContext(2).index;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r9.calendar.weekNumbers[i_r6]);\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵlistener(\"click\", function BsDaysCalendarViewComponent_tr_8_td_1_span_2_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const week_r5 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.selectWeek(week_r5);\n    })(\"mouseenter\", function BsDaysCalendarViewComponent_tr_8_td_1_span_2_Template_span_mouseenter_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const week_r5 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.weekHoverHandler(week_r5, true);\n    })(\"mouseleave\", function BsDaysCalendarViewComponent_tr_8_td_1_span_2_Template_span_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const week_r5 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.weekHoverHandler(week_r5, false);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r6 = i0.ɵɵnextContext(2).index;\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r10.calendar.weekNumbers[i_r6]);\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 8);\n    i0.ɵɵtemplate(1, BsDaysCalendarViewComponent_tr_8_td_1_span_1_Template, 2, 1, \"span\", 9);\n    i0.ɵɵtemplate(2, BsDaysCalendarViewComponent_tr_8_td_1_span_2_Template, 2, 1, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active-week\", ctx_r7.isWeekHovered);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.isiOS);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.isiOS);\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_2_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵlistener(\"click\", function BsDaysCalendarViewComponent_tr_8_td_2_span_1_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return ctx_r27.selectDay(day_r23);\n    })(\"mouseenter\", function BsDaysCalendarViewComponent_tr_8_td_2_span_1_Template_span_mouseenter_0_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return ctx_r30.hoverDay(day_r23, true);\n    })(\"mouseleave\", function BsDaysCalendarViewComponent_tr_8_td_2_span_1_Template_span_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return ctx_r32.hoverDay(day_r23, false);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const day_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"tooltip\", day_r23.tooltipText);\n    i0.ɵɵproperty(\"day\", day_r23);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", day_r23.label, \" 3\");\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_2_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 18);\n    i0.ɵɵlistener(\"click\", function BsDaysCalendarViewComponent_tr_8_td_2_span_2_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return ctx_r35.selectDay(day_r23);\n    })(\"mouseenter\", function BsDaysCalendarViewComponent_tr_8_td_2_span_2_Template_span_mouseenter_0_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r38 = i0.ɵɵnextContext(2);\n      return ctx_r38.hoverDay(day_r23, true);\n    })(\"mouseleave\", function BsDaysCalendarViewComponent_tr_8_td_2_span_2_Template_span_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return ctx_r40.hoverDay(day_r23, false);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const day_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"day\", day_r23);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", day_r23.label, \" 2\");\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_2_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r45 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵlistener(\"click\", function BsDaysCalendarViewComponent_tr_8_td_2_span_3_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r45);\n      const day_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r43 = i0.ɵɵnextContext(2);\n      return ctx_r43.selectDay(day_r23);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const day_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"day\", day_r23);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", day_r23.label, \" 1\");\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 13);\n    i0.ɵɵtemplate(1, BsDaysCalendarViewComponent_tr_8_td_2_span_1_Template, 2, 3, \"span\", 14);\n    i0.ɵɵtemplate(2, BsDaysCalendarViewComponent_tr_8_td_2_span_2_Template, 2, 2, \"span\", 15);\n    i0.ɵɵtemplate(3, BsDaysCalendarViewComponent_tr_8_td_2_span_3_Template, 2, 2, \"span\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r8.isiOS && ctx_r8.isShowTooltip);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r8.isiOS && !ctx_r8.isShowTooltip);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.isiOS);\n  }\n}\n\nfunction BsDaysCalendarViewComponent_tr_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, BsDaysCalendarViewComponent_tr_8_td_1_Template, 3, 4, \"td\", 6);\n    i0.ɵɵtemplate(2, BsDaysCalendarViewComponent_tr_8_td_2_Template, 4, 3, \"td\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const week_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.options && ctx_r2.options.showWeekNumbers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", week_r5.days);\n  }\n}\n\nexport let BsDaysCalendarViewComponent = /*#__PURE__*/(() => {\n  class BsDaysCalendarViewComponent {\n    constructor(_config) {\n      this._config = _config;\n      this.onNavigate = new EventEmitter();\n      this.onViewMode = new EventEmitter();\n      this.onSelect = new EventEmitter();\n      this.onHover = new EventEmitter();\n      this.onHoverWeek = new EventEmitter();\n      this.isiOS = /iPad|iPhone|iPod/.test(navigator.platform) || navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1;\n\n      if (this._config.dateTooltipTexts && this._config.dateTooltipTexts.length > 0) {\n        this.isShowTooltip = true;\n      }\n    }\n\n    navigateTo(event) {\n      const step = BsNavigationDirection.DOWN === event ? -1 : 1;\n      this.onNavigate.emit({\n        step: {\n          month: step\n        }\n      });\n    }\n\n    changeViewMode(event) {\n      this.onViewMode.emit(event);\n    }\n\n    selectDay(event) {\n      this.onSelect.emit(event);\n    }\n\n    selectWeek(week) {\n      if (!this._config.selectWeek && !this._config.selectWeekDateRange) {\n        return;\n      }\n\n      if (week.days.length === 0) {\n        return;\n      }\n\n      if (this._config.selectWeek && week.days[0] && !week.days[0].isDisabled && this._config.selectFromOtherMonth) {\n        this.onSelect.emit(week.days[0]);\n        return;\n      }\n\n      const selectedDay = week.days.find(day => {\n        return this._config.selectFromOtherMonth ? !day.isDisabled : !day.isOtherMonth && !day.isDisabled;\n      });\n      this.onSelect.emit(selectedDay);\n\n      if (this._config.selectWeekDateRange) {\n        const days = week.days.slice(0);\n        const lastDayOfRange = days.reverse().find(day => {\n          return this._config.selectFromOtherMonth ? !day.isDisabled : !day.isOtherMonth && !day.isDisabled;\n        });\n        this.onSelect.emit(lastDayOfRange);\n      }\n    }\n\n    weekHoverHandler(cell, isHovered) {\n      if (!this._config.selectWeek && !this._config.selectWeekDateRange) {\n        return;\n      }\n\n      const hasActiveDays = cell.days.find(day => {\n        return this._config.selectFromOtherMonth ? !day.isDisabled : !day.isOtherMonth && !day.isDisabled;\n      });\n\n      if (hasActiveDays) {\n        cell.isHovered = isHovered;\n        this.isWeekHovered = isHovered;\n        this.onHoverWeek.emit(cell);\n      }\n    }\n\n    hoverDay(cell, isHovered) {\n      if (this._config.selectFromOtherMonth && cell.isOtherMonth) {\n        cell.isOtherMonthHovered = isHovered;\n      }\n\n      if (this._config.dateTooltipTexts) {\n        cell.tooltipText = '';\n\n        this._config.dateTooltipTexts.forEach(dateData => {\n          if (isSameDay(dateData.date, cell.date)) {\n            cell.tooltipText = dateData.tooltipText;\n            return;\n          }\n        });\n      }\n\n      this.onHover.emit({\n        cell,\n        isHovered\n      });\n    }\n\n  }\n\n  BsDaysCalendarViewComponent.ɵfac = function BsDaysCalendarViewComponent_Factory(t) {\n    return new (t || BsDaysCalendarViewComponent)(i0.ɵɵdirectiveInject(i1.BsDatepickerConfig));\n  };\n\n  BsDaysCalendarViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BsDaysCalendarViewComponent,\n    selectors: [[\"bs-days-calendar-view\"]],\n    inputs: {\n      calendar: \"calendar\",\n      options: \"options\"\n    },\n    outputs: {\n      onNavigate: \"onNavigate\",\n      onViewMode: \"onViewMode\",\n      onSelect: \"onSelect\",\n      onHover: \"onHover\",\n      onHoverWeek: \"onHoverWeek\"\n    },\n    decls: 9,\n    vars: 4,\n    consts: [[3, \"calendar\", \"onNavigate\", \"onViewMode\"], [\"role\", \"grid\", 1, \"days\", \"weeks\"], [4, \"ngIf\"], [\"aria-label\", \"weekday\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [\"aria-label\", \"weekday\"], [\"class\", \"week\", 3, \"active-week\", 4, \"ngIf\"], [\"role\", \"gridcell\", 4, \"ngFor\", \"ngForOf\"], [1, \"week\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [3, \"click\"], [3, \"click\", \"mouseenter\", \"mouseleave\"], [\"role\", \"gridcell\"], [\"bsDatepickerDayDecorator\", \"\", 3, \"day\", \"tooltip\", \"click\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [\"bsDatepickerDayDecorator\", \"\", 3, \"day\", \"click\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [\"bsDatepickerDayDecorator\", \"\", 3, \"day\", \"click\", 4, \"ngIf\"], [\"bsDatepickerDayDecorator\", \"\", 3, \"day\", \"tooltip\", \"click\", \"mouseenter\", \"mouseleave\"], [\"bsDatepickerDayDecorator\", \"\", 3, \"day\", \"click\", \"mouseenter\", \"mouseleave\"], [\"bsDatepickerDayDecorator\", \"\", 3, \"day\", \"click\"]],\n    template: function BsDaysCalendarViewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"bs-calendar-layout\");\n        i0.ɵɵelementStart(1, \"bs-datepicker-navigation-view\", 0);\n        i0.ɵɵlistener(\"onNavigate\", function BsDaysCalendarViewComponent_Template_bs_datepicker_navigation_view_onNavigate_1_listener($event) {\n          return ctx.navigateTo($event);\n        })(\"onViewMode\", function BsDaysCalendarViewComponent_Template_bs_datepicker_navigation_view_onViewMode_1_listener($event) {\n          return ctx.changeViewMode($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"table\", 1);\n        i0.ɵɵelementStart(3, \"thead\");\n        i0.ɵɵelementStart(4, \"tr\");\n        i0.ɵɵtemplate(5, BsDaysCalendarViewComponent_th_5_Template, 1, 0, \"th\", 2);\n        i0.ɵɵtemplate(6, BsDaysCalendarViewComponent_th_6_Template, 2, 1, \"th\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"tbody\");\n        i0.ɵɵtemplate(8, BsDaysCalendarViewComponent_tr_8_Template, 3, 2, \"tr\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"calendar\", ctx.calendar);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.options && ctx.options.showWeekNumbers);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.calendar.weekdays);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.calendar.weeks);\n      }\n    },\n    directives: [i2.BsCalendarLayoutComponent, i3.BsDatepickerNavigationViewComponent, i4.NgIf, i4.NgForOf, i5.BsDatepickerDayDecoratorComponent, i6.TooltipDirective],\n    encapsulation: 2\n  });\n  return BsDaysCalendarViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}