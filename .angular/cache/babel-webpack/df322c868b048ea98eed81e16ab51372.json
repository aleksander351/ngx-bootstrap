{"ast":null,"code":"import { isBs3 } from 'ngx-bootstrap/utils';\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./datepicker-inner.component\";\nimport * as i2 from \"@angular/common\";\n\nfunction DayPickerComponent_table_0_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function DayPickerComponent_table_0_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.datePicker.move(-1);\n    });\n    i0.ɵɵtext(1, \"\\u2039\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DayPickerComponent_table_0_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function DayPickerComponent_table_0_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.datePicker.move(-1);\n    });\n    i0.ɵɵtext(1, \"<\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DayPickerComponent_table_0_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function DayPickerComponent_table_0_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.datePicker.move(1);\n    });\n    i0.ɵɵtext(1, \"\\u203A\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DayPickerComponent_table_0_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function DayPickerComponent_table_0_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.datePicker.move(1);\n    });\n    i0.ɵɵtext(1, \"> \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DayPickerComponent_table_0_th_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\");\n  }\n}\n\nfunction DayPickerComponent_table_0_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 10);\n    i0.ɵɵelementStart(1, \"small\", 11);\n    i0.ɵɵelementStart(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const labelz_r16 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(labelz_r16.abbr);\n  }\n}\n\nfunction DayPickerComponent_table_0_ng_template_17_tr_0_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 10);\n    i0.ɵɵelementStart(1, \"em\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const index_r18 = i0.ɵɵnextContext(2).index;\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r20.weekNumbers[index_r18]);\n  }\n}\n\nconst _c0 = function (a0, a1, a2, a3, a4) {\n  return {\n    \"btn-secondary\": a0,\n    \"btn-info\": a1,\n    disabled: a2,\n    active: a3,\n    \"btn-default\": a4\n  };\n};\n\nconst _c1 = function (a0, a1) {\n  return {\n    \"text-muted\": a0,\n    \"text-info\": a1\n  };\n};\n\nfunction DayPickerComponent_table_0_ng_template_17_tr_0_td_2_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DayPickerComponent_table_0_ng_template_17_tr_0_td_2_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const dtz_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(4);\n      return ctx_r25.datePicker.select(dtz_r23.date);\n    });\n    i0.ɵɵelementStart(1, \"span\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dtz_r23 = i0.ɵɵnextContext().$implicit;\n    const ctx_r24 = i0.ɵɵnextContext(4);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-sm \", dtz_r23.customClass, \"\");\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction5(7, _c0, ctx_r24.isBs4 && !dtz_r23.selected && !ctx_r24.datePicker.isActive(dtz_r23), dtz_r23.selected, dtz_r23.disabled, !ctx_r24.isBs4 && ctx_r24.datePicker.isActive(dtz_r23), !ctx_r24.isBs4))(\"disabled\", dtz_r23.disabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(13, _c1, dtz_r23.secondary || dtz_r23.current, !ctx_r24.isBs4 && dtz_r23.current));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(dtz_r23.label);\n  }\n}\n\nfunction DayPickerComponent_table_0_ng_template_17_tr_0_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtemplate(1, DayPickerComponent_table_0_ng_template_17_tr_0_td_2_button_1_Template, 3, 16, \"button\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dtz_r23 = ctx.$implicit;\n    const ctx_r21 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"id\", dtz_r23.uid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r21.datePicker.onlyCurrentMonth && dtz_r23.secondary));\n  }\n}\n\nfunction DayPickerComponent_table_0_ng_template_17_tr_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, DayPickerComponent_table_0_ng_template_17_tr_0_td_1_Template, 3, 1, \"td\", 12);\n    i0.ɵɵtemplate(2, DayPickerComponent_table_0_ng_template_17_tr_0_td_2_Template, 2, 2, \"td\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rowz_r17 = i0.ɵɵnextContext().$implicit;\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.datePicker.showWeeks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", rowz_r17);\n  }\n}\n\nfunction DayPickerComponent_table_0_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, DayPickerComponent_table_0_ng_template_17_tr_0_Template, 3, 2, \"tr\", 5);\n  }\n\n  if (rf & 2) {\n    const rowz_r17 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r7.datePicker.onlyCurrentMonth && rowz_r17[0].secondary && rowz_r17[6].secondary));\n  }\n}\n\nconst _c2 = function (a0) {\n  return {\n    disabled: a0\n  };\n};\n\nfunction DayPickerComponent_table_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"table\", 1);\n    i0.ɵɵelementStart(1, \"thead\");\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtemplate(4, DayPickerComponent_table_0_button_4_Template, 2, 0, \"button\", 2);\n    i0.ɵɵtemplate(5, DayPickerComponent_table_0_button_5_Template, 2, 0, \"button\", 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵelementStart(7, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function DayPickerComponent_table_0_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.datePicker.toggleMode(0);\n    });\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtemplate(11, DayPickerComponent_table_0_button_11_Template, 2, 0, \"button\", 4);\n    i0.ɵɵtemplate(12, DayPickerComponent_table_0_button_12_Template, 2, 0, \"button\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"tr\");\n    i0.ɵɵtemplate(14, DayPickerComponent_table_0_th_14_Template, 1, 0, \"th\", 5);\n    i0.ɵɵtemplate(15, DayPickerComponent_table_0_th_15_Template, 4, 1, \"th\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, DayPickerComponent_table_0_ng_template_17_Template, 1, 1, \"ng-template\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"aria-labelledby\", ctx_r0.datePicker.uniqueId + \"-title\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isBs4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isBs4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", 5 + (ctx_r0.datePicker.showWeeks ? 1 : 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", ctx_r0.datePicker.uniqueId + \"-title\")(\"disabled\", ctx_r0.datePicker.datepickerMode === ctx_r0.datePicker.maxMode)(\"ngClass\", i0.ɵɵpureFunction1(13, _c2, ctx_r0.datePicker.datepickerMode === ctx_r0.datePicker.maxMode));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isBs4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isBs4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.datePicker.showWeeks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.labels);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.rows);\n  }\n}\n\nexport let DayPickerComponent = /*#__PURE__*/(() => {\n  class DayPickerComponent {\n    constructor(datePicker) {\n      this.labels = []; // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      this.rows = [];\n      this.weekNumbers = [];\n      this.datePicker = datePicker;\n    }\n\n    get isBs4() {\n      return !isBs3();\n    }\n    /*protected getDaysInMonth(year:number, month:number) {\r\n     return ((month === 1) && (year % 4 === 0) &&\r\n     ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\r\n     }*/\n\n\n    ngOnInit() {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      const self = this;\n      this.datePicker.stepDay = {\n        months: 1\n      }; // todo valorkin fix\n\n      this.datePicker.setRefreshViewHandler(function () {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const that = this;\n        const year = that.activeDate.getFullYear();\n        const month = that.activeDate.getMonth();\n        const firstDayOfMonth = new Date(year, month, 1);\n        const difference = that.startingDay - firstDayOfMonth.getDay();\n        const numDisplayedFromPreviousMonth = difference > 0 ? 7 - difference : -difference;\n        const firstDate = new Date(firstDayOfMonth.getTime());\n\n        if (numDisplayedFromPreviousMonth > 0) {\n          firstDate.setDate(-numDisplayedFromPreviousMonth + 1);\n        } // 42 is the number of days on a six-week calendar\n\n\n        const _days = self.getDates(firstDate, 42);\n\n        const days = [];\n\n        for (let i = 0; i < 42; i++) {\n          const _dateObject = that.createDateObject(_days[i], that.formatDay);\n\n          _dateObject.secondary = _days[i].getMonth() !== month;\n          _dateObject.uid = that.uniqueId + '-' + i;\n          days[i] = _dateObject;\n        }\n\n        self.labels = [];\n\n        for (let j = 0; j < 7; j++) {\n          self.labels[j] = {};\n          self.labels[j].abbr = that.dateFilter(days[j].date, that.formatDayHeader);\n          self.labels[j].full = that.dateFilter(days[j].date, 'EEEE');\n        }\n\n        self.title = that.dateFilter(that.activeDate, that.formatDayTitle);\n        self.rows = that.split(days, 7);\n\n        if (that.showWeeks) {\n          self.weekNumbers = [];\n          const thursdayIndex = (4 + 7 - that.startingDay) % 7;\n          const numWeeks = self.rows.length;\n\n          for (let curWeek = 0; curWeek < numWeeks; curWeek++) {\n            const _date = self.rows[curWeek][thursdayIndex].date;\n\n            if (_date) {\n              self.weekNumbers.push(self.getISO8601WeekNumber(_date));\n            }\n          }\n        }\n      }, 'day');\n      this.datePicker.setCompareHandler(function (date1, date2) {\n        const d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());\n        const d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());\n        return d1.getTime() - d2.getTime();\n      }, 'day');\n      this.datePicker.refreshView();\n    }\n\n    getDates(startDate, n) {\n      const dates = new Array(n);\n      let current = new Date(startDate.getTime());\n      let i = 0;\n      let date;\n\n      while (i < n) {\n        date = new Date(current.getTime());\n        date = this.datePicker.fixTimeZone(date);\n        dates[i++] = date;\n        current = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\n      }\n\n      return dates;\n    }\n\n    getISO8601WeekNumber(date) {\n      const checkDate = new Date(date.getTime()); // Thursday\n\n      checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\n      const time = checkDate.getTime(); // Compare with Jan 1\n\n      checkDate.setMonth(0);\n      checkDate.setDate(1);\n      return Math.floor(Math.round((time - checkDate.getTime()) / 86400000) / 7) + 1;\n    }\n\n  }\n\n  DayPickerComponent.ɵfac = function DayPickerComponent_Factory(t) {\n    return new (t || DayPickerComponent)(i0.ɵɵdirectiveInject(i1.DatePickerInnerComponent));\n  };\n\n  DayPickerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DayPickerComponent,\n    selectors: [[\"daypicker\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"role\", \"grid\", \"aria-activedescendant\", \"activeDateId\", 4, \"ngIf\"], [\"role\", \"grid\", \"aria-activedescendant\", \"activeDateId\"], [\"type\", \"button\", \"class\", \"btn btn-default btn-secondary btn-sm pull-left float-left\", \"tabindex\", \"-1\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"tabindex\", \"-1\", 1, \"btn\", \"btn-default\", \"btn-secondary\", \"btn-sm\", 2, \"width\", \"100%\", 3, \"id\", \"disabled\", \"ngClass\", \"click\"], [\"type\", \"button\", \"class\", \"btn btn-default btn-secondary btn-sm pull-right float-right\", \"tabindex\", \"-1\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"text-center\", 4, \"ngFor\", \"ngForOf\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"type\", \"button\", \"tabindex\", \"-1\", 1, \"btn\", \"btn-default\", \"btn-secondary\", \"btn-sm\", \"pull-left\", \"float-left\", 3, \"click\"], [\"type\", \"button\", \"tabindex\", \"-1\", 1, \"btn\", \"btn-default\", \"btn-secondary\", \"btn-sm\", \"pull-right\", \"float-right\", 3, \"click\"], [1, \"text-center\"], [\"aria-label\", \"labelz.full\"], [\"class\", \"h6\", \"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"text-center\", \"role\", \"gridcell\", 3, \"id\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"gridcell\", 1, \"text-center\", 3, \"id\"], [\"type\", \"button\", \"style\", \"min-width:100%;\", \"tabindex\", \"-1\", 3, \"class\", \"ngClass\", \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"tabindex\", \"-1\", 2, \"min-width\", \"100%\", 3, \"ngClass\", \"disabled\", \"click\"], [3, \"ngClass\"]],\n    template: function DayPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DayPickerComponent_table_0_Template, 18, 15, \"table\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.datePicker.datepickerMode === \"day\");\n      }\n    },\n    directives: [i2.NgIf, i2.NgClass, i2.NgForOf],\n    styles: [\"[_nghost-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{color:#292b2c;background-color:#fff;border-color:#ccc}[_nghost-%COMP%]   .btn-info[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#292b2c!important}\"]\n  });\n  return DayPickerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}